<div class="controlBlock">
  <button class="forward">forward</button>
  <button class="left">left</button>
  <button class="right">right</button>
  <button class="search">search</button>
</div>

<br>
<button id="commit">Commit</button>
<br>
<br>
<div class="commandList">
</div>

<style media="screen">
  .commandList {
    width: 100px;
  }

  .commandList .wait {
    background: green;
  }

  .commandList .crash {
    background: red;
  }

  .commandList .ready {
    background: blue;
  }

  .commandList .win {
    background: #90C3D4;
  }
  .commandList .accepted {
    background: #FFE928;
  }
</style>

<script type="text/javascript">
    $('.controlBlock button').click(function(event) {
      $('#stack').val($('#stack').val() + event.target.className);
      $(".commandList").append("<div class='wait'>" + event.target.className + "</div>")
    });

    $('#commit').click(function(){
      $('.commandList div.wait').each(function(i,e){
        socket.send($(e).html());
      });
    });

    function downCommand(message) {
      console.log(message);
      var command;
      if(message == 'accepted')
        command = $('.commandList div.wait').first()
      if(message == 'ready')
        command = $('.commandList div.accepted').first()
      command.removeClass().addClass(message)
    }

    setInterval(function() {
      if(messageStack.length > 0) {
        downCommand(messageStack.shift());
      }
    }, 10);
</script>
