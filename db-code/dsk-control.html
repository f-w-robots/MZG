<div class="controlBlock">
  <button class="forward">forward</button>
  <button class="left">left</button>
  <button class="right">right</button>
  <button class="search">search</button>
</div>

<br>
<button id="commit">Commit</button>
<br>
<br>
<div class="commandList">
</div>

<style media="screen">
  .commandList {
    width: 100px;
  }

  .commandList .wait {
    background: green;
  }

  .commandList .error {
    background: red;
  }

  .commandList .ready {
    background: blue;
  }

  .commandList .win {
    background: #90C3D4;
  }
</style>

<script type="text/javascript">
    $('.controlBlock button').click(function(event) {
      $('#stack').val($('#stack').val() + event.target.className);
      $(".commandList").append("<div class='wait'>" + event.target.className + "</div>")
    });

    $('#commit').click(function(){
      $('.commandList div.wait').each(function(i,e){
        socket.send($(e).html());
      });
    });

    function downCommand(message) {
      var command = $('.commandList div.wait').first()
      var className = 'ready';
      if(message == 'crash')
        className = 'error';
      if(message == 'win')
        className = 'win';
      command.removeClass('wait').addClass(className)
    }

    setInterval(function() {
      if(messageStack.length > 0) {
        console.log(messageStack.join());
        downCommand(messageStack.shift());
      }
    }, 10);
</script>
